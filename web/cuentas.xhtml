<?xml version='1.0' encoding='UTF-8' ?>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
        xmlns:p="http://primefaces.org/ui"
        >
    <h:head>
        <title>Facelet Title</title>
    </h:head>
    <h:body>
        <h:body>
		<h:form id="form1">
                    <p:dataTable id="afiliados" var="af" value="#{cuentasMb.afiliados}">
				<p:column headerText="Nombres">
                                    <h:outputText value="#{af.nombres}" />
				</p:column>
				<p:column headerText="Apellidos">
                                    <h:outputText value="#{af.apellidos}" />
				</p:column>
				<p:column headerText="Es Afiliado">
                                    <h:outputText value="#{af.clienteList.get(0).esMiembro}" />
				</p:column>
				<p:column headerText="Ver Cuentas">
                                    <p:commandButton value="ver cuentas" action="#{cuentasMb.verCuentas(af)}" update="form1:cuentas"> </p:commandButton>
				</p:column>
			</p:dataTable>
			
                    <p:dataTable id="cuentas" var="cue" value="#{cuentasMb.cuentas}">
				<p:column headerText="Numero de cuenta">
                                    <h:outputText value="#{cue.numerocuenta}" />
				</p:column>
				<p:column headerText="Tipo cuenta">
                                    <h:outputText value="#{cue.idCuentatipo.nombre}" />
				</p:column>
				<p:column headerText="total cargos">
                                    <h:outputText value="#{cue.totalCargos}" />
				</p:column>
				<p:column headerText="Total Abonos">
                                    <h:outputText value="#{cue.totalAbonos}" />
				</p:column>
				<p:column headerText="Saldo">
                                    <h:outputText value="#{cue.saldo}" />
				</p:column>
				<p:column headerText="Ver Transacciones">
                                    <p:commandButton value="ver Transacciones" action="#{cuentasMb.verTransacciones(cue)}" update="form1:transacciones"> </p:commandButton>
				</p:column>
			</p:dataTable>
			
                    <p:dataTable id="transacciones" var="tra" value="#{cuentasMb.transacciones}">
				<p:column headerText="id transaccion">
                                    <h:outputText value="#{tra.idTransaccion}" />
				</p:column>
				<p:column headerText="Monto Cargo">
                                    <h:outputText value="#{tra.montocargo}" />
				</p:column>
				<p:column headerText="Monto Abono">
                                    <h:outputText value="#{tra.montoabono}" />
				</p:column>
				<p:column headerText="Fecha">
                                    <h:outputText value="#{tra.fecha}" />
				</p:column>
				
			</p:dataTable>
			
		</h:form>
	</h:body>
    </h:body>
</html>

